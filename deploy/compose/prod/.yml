# Production Environment Override
# Updated for Single RDS Usage
version: "3.8"

services:
  # Production specific configurations
  eureka-server:
    environment:
      SPRING_PROFILES_ACTIVE: docker,prod
    env_file:
      - ../env/prod/eureka-server.env

  api-gateway:
    environment:
      SPRING_PROFILES_ACTIVE: docker,prod
    env_file:
      - ../env/prod/gateway.env

  # In production, remove the local database service and use AWS RDS
  eatcloud-db:
    # This service should not be deployed in production
    # Instead, use external AWS RDS instance
    deploy:
      replicas: 0

  # Uncomment and configure services for production
#  user-service:
#    env_file:
#      - ../env/prod/user-service.env

#  store-service:
#    env_file:
#      - ../env/prod/store-service.env

#  order-service:
#    env_file:
#      - ../env/prod/order-service.env

#  payment-service:
#    env_file:
#      - ../env/prod/payment-service.env
